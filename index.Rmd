---
title: "Gov 50 Final Project"
author: "Claire Pak"
description: "Identifying popular NBA teams using proxies to demonstrate support."
output:
  distill::distill_article:
    self_contained: false
---


## Project thoughts

I am interested in exploring data related to basketball teams in the NBA. More specifically, I am interested in tracking support for various teams over time and exploring the potential fluctuations to identify which teams have been the most popular during different periods. Some proxies I may use to measure support include attendance at games. However, I understand correlation is not equal to causation, so I plan to look at other factors such as team winning percentage, health of players on the team, number of championships, etc. As of right now, I imagine the various teams will be my independent variable, and then whatever proxy I choose to measure support will serve as my dependent variable. 


##Milestone 2 - Project Proposal

Does the performance of NBA players improve during the season when their contracts expire, in contrast to performance in previous seasons? In a league as competitive as the NBA, players often feel pressure to maintain peak athleticism, particularly in contract expiration seasons due to the consistent inflow of new talent that enter through the drafts. In this study, I plan to understand the extent to which a player's performance improves in the season of which their contract expires, allowing a player to either re-sign their contract, or be released. I hypothesize that the performance of NBA players significantly improves in the season in which their contract expires, compared to performances in prior seasons. During the season prior to the contract expiration, I expect players to focus on improving key metrics including points per game (PPG), rebounds, steals, etc in efforts to get a resign offer. The explanatory variable is whether we are observing the season in which the contract expires, or seasons prior to the expiration. This variable will be measured by identifying the season a players contract will end. The outcome variable of interest is the player's performance, which can be measured through monitoring key stats such as a player's points per game, steals, rebounds, number of turnovers, etc. I plan to choose a set number of key stats and then compare those across the different seasons. For instance, if a player's contract expires at the end of the 2023-2024 season, my study would compare the PPG, rebounds and steals of this season to those of prior seasons such as 2022-2023, 2021-2022, etc. For the study, I plan to use the NBA advanced statistics dataset on nba.com that includes all of the mentioned key stats and the basketball-reference website to identify this information. A pattern that would provide support for the hypothesis is if there is an overall net increase in the performance metrics for a substantial portion of the season. If the study uses PPG, rebounds and steals per season as the key metrics to measure a player’s performance, there should be a positive relationship where these metrics are higher in the season during which a player’s contract will end, compared to other seasons. If there is no significant change, or perhaps even a decline in the previously mentioned metrics, the negative observed patterns would be an indication that the hypothesis may not be supported. 

##Milestone 3

```{r}
##Loading necessary packages
library(readr)
library(tidyverse)
library(dplyr)
```

```{r}
##loading NBA 2022-2023 season data from Kaggle data
nba_22_23 <- read_csv("nba_22_23_stats.csv")
```

```{r}
##creating a composite performance variable based off of points per game (PTS), assists (AST) and turnovers (TOV) that will serve as the dependent variable

nba_22_23 <- nba_22_23 |>
  mutate(performance_2024 =  PTS + AST - TOV)


##creating data visualization
player_performance_graph <- ggplot(data = nba_22_23,
                                    mapping = aes(x = Salary,
                                                  y = performance_2024, color = performance_2024)) +
  geom_point() +
  labs(x = "Salary (dollars)",
       y = "Player Performance",
       title = "NBA Player Performance based on Salary",
       subtitle = "Player Performance determined by PTS (points per game) + AST (assists) - TOV (turnovers)") +
  scale_x_continuous(labels = scales::comma) +
  labs(color = "Player Performance (PTS + AST - TOV)") 

player_performance_graph
```


##Milestone 4
```{r}
##For milestone 4: Same code from milestone 3 as I want to maintain the same substance for my graph
##but now adding in a regression line to better visualize the relationship

nba_22_23 <- nba_22_23 |>
  mutate(performance_2024 =  PTS + AST - TOV)

##creating graphs for each position and adding in a regression line for data visualization analysis 
performance_analysis <- ggplot(data = nba_22_23,
                                    mapping = aes(x = Salary,
                                                  y = performance_2024, color = performance_2024)) +
  geom_point(size = 1) +
  geom_smooth(method = "lm", se = FALSE, color = "black") +
  labs(x = "Salary (dollars)",
       y = "Player Performance",
       title = "NBA Player Performance based on Salary for Each Position",
       subtitle = "Player Performance determined by PTS (points per game) + AST (assists) - TOV (turnovers)") +
  scale_x_continuous(labels = scales::comma) +
  labs(color = "Player Performance (PTS + AST - TOV)") +
  facet_wrap(~ Position)+
  theme(axis.text.x = element_text(angle = 45, hjust = 1))
performance_analysis
```
Since the first two milestones, my project topic has remained the same, but the focus of my research question has changed. My new research question seeks to understand: how does salary effect NBA player performance? To determine player performance, a player's average points per game and assists per game are added together, and then turnovers per game are subtracted from that value, as having high turnovers is not something you want players to have. While the general hypothesis may be that a higher salary correlates to better performance, the NBA in the past has included several players, such as Ben Simmons, that are paid high salaries due to their high draft pick for instance, but do not perform to a high level. As such, I was curious to understand what the greater patterns across the league may look like. Based on the plots, one observation is that there is a positive correlation between salary and player performance. More specifically, as salary is higher, player performance generally seems to be higher as well. I included a regression line to better visualize this observation, and the regression line also supports a positive relationship between the two variables. To better understand a breakdown of the positive relationship, I then made seperate graphs based on player position to see if there was any variance based on position. The 9 different graphs of the 9 different positions also display a positive relationship between salary and player performance, which supports the hypothesis that as salary increases, player performance also increases. However, further analysis will be necessary to see if there is causation involved between salary and player performance. 





